{"version":3,"file":"favorites.js","sources":["../src/js/favorites.js"],"sourcesContent":["import { data_api } from './api';\nimport { handleExerciseItemClick } from './exercises';\nimport {\n  getFavoritesLS,\n  removeFavoriteLS,\n  getDailyQuoteLS,\n  setDailyQuoteLS,\n} from './local_storage';\nimport { Template } from './template';\n\nconst API_URL = 'https://your-energy.b.goit.study/api';\n\nconst refs = {\n  quoteText: document.querySelector('.js-quote-text'),\n  quoteAuthor: document.querySelector('.js-quote-author'),\n  listContainer: document.querySelector('.js-favorites-list'),\n  emptyMessage: document.querySelector('.js-favorites-empty'),\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  fetchQuote();\n  renderFavorites();\n});\n\nasync function fetchQuote() {\n  if (!refs.quoteText) return;\n\n  const fallbackQuote = {\n    quote:\n      \"Your body can stand almost anything. It's your mind that you have to convince.\",\n    author: 'Unknown',\n  };\n\n  // Check localStorage cache first\n  const cachedQuote = getDailyQuoteLS();\n  if (cachedQuote) {\n    refs.quoteText.textContent = cachedQuote.quote;\n    refs.quoteAuthor.textContent = cachedQuote.author;\n    return;\n  }\n\n  // Fetch from API if no cache\n  try {\n    const response = await fetch(`${API_URL}/quote`);\n    if (!response.ok) throw new Error('Failed to fetch quote');\n\n    const { author, quote } = await response.json();\n\n    refs.quoteText.textContent = quote;\n    refs.quoteAuthor.textContent = author;\n    // Save to cache\n    setDailyQuoteLS(quote, author);\n  } catch (error) {\n    console.error('Error getting quote:', error);\n    refs.quoteText.textContent = fallbackQuote.quote;\n    refs.quoteAuthor.textContent = fallbackQuote.author;\n  }\n}\n\nasync function getFavoriteExercisesAsync() {\n  const ids = getFavoritesLS();\n\n  if (ids.length === 0) return [];\n\n  const requests = ids.map(id => data_api.getExerciseById(id));\n  const exercises = await Promise.all(requests);\n\n  return exercises;\n}\n\nasync function renderFavorites() {\n  if (!refs.listContainer) return;\n\n  const favorites = await getFavoriteExercisesAsync();\n\n  if (favorites.length === 0) {\n    refs.listContainer.innerHTML = '';\n    refs.emptyMessage.classList.remove('is-hidden');\n  } else {\n    refs.emptyMessage.classList.add('is-hidden');\n    refs.listContainer.innerHTML = createMarkup(favorites);\n    addEventListeners();\n  }\n}\n\nfunction createMarkup(arr) {\n  return arr.map(card => Template.favoriteCard(card)).join('');\n}\n\nfunction addEventListeners() {\n  const deleteBtns = refs.listContainer.querySelectorAll('.js-delete-btn');\n  const startBtns = refs.listContainer.querySelectorAll('.js-start-btn');\n\n  deleteBtns.forEach(btn => {\n    btn.addEventListener('click', handleDelete);\n  });\n\n  startBtns.forEach(btn => {\n    btn.addEventListener('click', handleStart);\n  });\n}\n\nfunction handleDelete(event) {\n  const btn = event.currentTarget;\n  const id = btn.dataset.id;\n\n  removeFavoriteLS(id);\n  renderFavorites();\n}\n\nfunction handleStart(event) {\n  const btn = event.currentTarget;\n  const id = btn.dataset.id;\n\n  handleExerciseItemClick(event, id);\n}"],"names":["API_URL","refs","fetchQuote","renderFavorites","fallbackQuote","cachedQuote","getDailyQuoteLS","response","author","quote","setDailyQuoteLS","error","getFavoriteExercisesAsync","ids","getFavoritesLS","requests","id","data_api","favorites","createMarkup","addEventListeners","arr","card","Template","deleteBtns","startBtns","btn","handleDelete","handleStart","event","removeFavoriteLS","handleExerciseItemClick"],"mappings":"4HAUA,MAAMA,EAAU,uCAEVC,EAAO,CACX,UAAW,SAAS,cAAc,gBAAgB,EAClD,YAAa,SAAS,cAAc,kBAAkB,EACtD,cAAe,SAAS,cAAc,oBAAoB,EAC1D,aAAc,SAAS,cAAc,qBAAqB,CAC5D,EAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDC,IACAC,GACF,CAAC,EAED,eAAeD,GAAa,CAC1B,GAAI,CAACD,EAAK,UAAW,OAErB,MAAMG,EAAgB,CACpB,MACE,iFACF,OAAQ,SACZ,EAGQC,EAAcC,IACpB,GAAID,EAAa,CACfJ,EAAK,UAAU,YAAcI,EAAY,MACzCJ,EAAK,YAAY,YAAcI,EAAY,OAC3C,MACD,CAGD,GAAI,CACF,MAAME,EAAW,MAAM,MAAM,GAAGP,CAAO,QAAQ,EAC/C,GAAI,CAACO,EAAS,GAAI,MAAM,IAAI,MAAM,uBAAuB,EAEzD,KAAM,CAAE,OAAAC,EAAQ,MAAAC,CAAK,EAAK,MAAMF,EAAS,KAAI,EAE7CN,EAAK,UAAU,YAAcQ,EAC7BR,EAAK,YAAY,YAAcO,EAE/BE,EAAgBD,EAAOD,CAAM,CAC9B,OAAQG,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CV,EAAK,UAAU,YAAcG,EAAc,MAC3CH,EAAK,YAAY,YAAcG,EAAc,MAC9C,CACH,CAEA,eAAeQ,GAA4B,CACzC,MAAMC,EAAMC,IAEZ,GAAID,EAAI,SAAW,EAAG,MAAO,CAAA,EAE7B,MAAME,EAAWF,EAAI,IAAIG,GAAMC,EAAS,gBAAgBD,CAAE,CAAC,EAG3D,OAFkB,MAAM,QAAQ,IAAID,CAAQ,CAG9C,CAEA,eAAeZ,GAAkB,CAC/B,GAAI,CAACF,EAAK,cAAe,OAEzB,MAAMiB,EAAY,MAAMN,IAEpBM,EAAU,SAAW,GACvBjB,EAAK,cAAc,UAAY,GAC/BA,EAAK,aAAa,UAAU,OAAO,WAAW,IAE9CA,EAAK,aAAa,UAAU,IAAI,WAAW,EAC3CA,EAAK,cAAc,UAAYkB,EAAaD,CAAS,EACrDE,IAEJ,CAEA,SAASD,EAAaE,EAAK,CACzB,OAAOA,EAAI,IAAIC,GAAQC,EAAS,aAAaD,CAAI,CAAC,EAAE,KAAK,EAAE,CAC7D,CAEA,SAASF,GAAoB,CAC3B,MAAMI,EAAavB,EAAK,cAAc,iBAAiB,gBAAgB,EACjEwB,EAAYxB,EAAK,cAAc,iBAAiB,eAAe,EAErEuB,EAAW,QAAQE,GAAO,CACxBA,EAAI,iBAAiB,QAASC,CAAY,CAC9C,CAAG,EAEDF,EAAU,QAAQC,GAAO,CACvBA,EAAI,iBAAiB,QAASE,CAAW,CAC7C,CAAG,CACH,CAEA,SAASD,EAAaE,EAAO,CAE3B,MAAMb,EADMa,EAAM,cACH,QAAQ,GAEvBC,EAAiBd,CAAE,EACnBb,GACF,CAEA,SAASyB,EAAYC,EAAO,CAE1B,MAAMb,EADMa,EAAM,cACH,QAAQ,GAEvBE,EAAwBF,EAAOb,CAAE,CACnC"}