{"version":3,"file":"favorites.js","sources":["../src/js/local_storage.js","../src/js/favorites.js"],"sourcesContent":["const STORAGE_KEY = {\n  FAVOTIRES: 'favorites',\n  UI_THEME: 'ui-theme',\n  LAST_SESSION: 'last_session',\n};\n\n/* ---------------- Last Session ---------------- */\n\nexport const getLastSessionLS = () => {\n  try {\n    const data = localStorage.getItem(STORAGE_KEY.LAST_SESSION);\n    return data ? JSON.parse(data) : null;\n  } catch (error) {\n    console.error('Error parsing last session from localStorage:', error);\n    return null;\n  }\n};\n\nexport const setLastSessionLS = value => {\n  if (value) {\n    try {\n      localStorage.setItem(STORAGE_KEY.LAST_SESSION, JSON.stringify(value));\n    } catch (error) {}\n    console.error('Error setting last session to localStorage:', error);\n  }\n};\n\n/* ---------------- FAVORITES ---------------- */\n\nexport const getFavoritesLS = () => {\n  try {\n    const data = localStorage.getItem(STORAGE_KEY.FAVOTIRES);\n    return data ? JSON.parse(data) : [];\n  } catch (error) {\n    console.error('Error parsing favorites from localStorage:', error);\n    return [];\n  }\n};\n\nexport const addFavoriteLS = id => {\n  try {\n    const data = getFavoritesLS();\n\n    if (!data.includes(id)) {\n      data.push(id);\n      localStorage.setItem(STORAGE_KEY.FAVOTIRES, JSON.stringify(data));\n    }\n  } catch (error) {\n    console.error('Error adding favorites to localStorage:', error);\n  }\n};\n\nexport const removeFavoriteLS = id => {\n  try {\n    const data = getFavoritesLS();\n    const updatedData = data.filter(item => item !== id);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(updatedData));\n  } catch (error) {\n    console.error('Error removing favorite item from localStorage:', error);\n  }\n};\n\n/* ---------------- UI THEME ---------------- */\n\nexport const getUIThemeLS = () => {\n  return localStorage.getItem(THEME_KEY) || 'light';\n};\n\nexport const setUIThemeLS = theme => {\n  if (theme !== 'light' && theme !== 'dark') return;\n  localStorage.setItem(STORAGE_KEY.UI_THEME, theme);\n};\n","import { data_api } from './api';\nimport { getFavoritesLS, removeFavoriteLS } from './local_storage';\nimport { Template } from './template';\n\nconst API_URL = 'https://your-energy.b.goit.study/api';\n\nconst refs = {\n  quoteText: document.querySelector('.js-quote-text'),\n  quoteAuthor: document.querySelector('.js-quote-author'),\n  listContainer: document.querySelector('.js-favorites-list'),\n  emptyMessage: document.querySelector('.js-favorites-empty'),\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  fetchQuote();\n  renderFavorites();\n});\n\nasync function fetchQuote() {\n  if (!refs.quoteText) return;\n\n  try {\n    const response = await fetch(`${API_URL}/quote`);\n    if (!response.ok) throw new Error('Failed to fetch quote');\n\n    const { author, quote } = await response.json();\n\n    refs.quoteText.textContent = quote;\n    refs.quoteAuthor.textContent = author;\n  } catch (error) {\n    console.error('Error getting quote:', error);\n    refs.quoteText.textContent =\n      'Your body can stand almost anything. Itâ€™s your mind that you have to convince.';\n    refs.quoteAuthor.textContent = 'Unknown';\n  }\n}\n\nasync function getFavoriteExercisesAsync() {\n  const ids = getFavoritesLS();\n\n  if (ids.length === 0) return [];\n\n  const requests = ids.map(id => data_api.getExerciseById(id));\n  const exercises = await Promise.all(requests);\n\n  return exercises;\n}\n\nasync function renderFavorites() {\n  if (!refs.listContainer) return;\n\n  const favorites = await getFavoriteExercisesAsync();\n\n  if (favorites.length === 0) {\n    refs.listContainer.innerHTML = '';\n    refs.emptyMessage.classList.remove('is-hidden');\n  } else {\n    refs.emptyMessage.classList.add('is-hidden');\n    refs.listContainer.innerHTML = createMarkup(favorites);\n    addEventListeners();\n  }\n}\n\nfunction createMarkup(arr) {\n  return arr.map(card => Template.favoriteCard(card)).join('');\n}\n\nfunction addEventListeners() {\n  const deleteBtns = refs.listContainer.querySelectorAll('.js-delete-btn');\n  const startBtns = refs.listContainer.querySelectorAll('.js-start-btn');\n\n  deleteBtns.forEach(btn => {\n    btn.addEventListener('click', handleDelete);\n  });\n\n  startBtns.forEach(btn => {\n    btn.addEventListener('click', handleStart);\n  });\n}\n\nfunction handleDelete(event) {\n  const btn = event.currentTarget;\n  const id = btn.dataset.id;\n\n  removeFavoriteLS(id);\n  renderFavorites();\n}\n\nfunction handleStart(event) {\n  const btn = event.currentTarget;\n  const id = btn.dataset.id;\n\n  console.log(`Open modal for exercise ID: ${id}`);\n}\n"],"names":["STORAGE_KEY","getFavoritesLS","data","error","removeFavoriteLS","id","updatedData","item","API_URL","refs","fetchQuote","renderFavorites","response","author","quote","getFavoriteExercisesAsync","ids","requests","data_api","favorites","createMarkup","addEventListeners","arr","card","Template","deleteBtns","startBtns","btn","handleDelete","handleStart","event"],"mappings":"yFAAA,MAAMA,EAAc,CAClB,UAAW,YACX,SAAU,WACV,aAAc,cAChB,EAyBaC,EAAiB,IAAM,CAClC,GAAI,CACF,MAAMC,EAAO,aAAa,QAAQF,EAAY,SAAS,EACvD,OAAOE,EAAO,KAAK,MAAMA,CAAI,EAAI,CAAA,CAClC,OAAQC,EAAO,CACd,eAAQ,MAAM,6CAA8CA,CAAK,EAC1D,EACR,CACH,EAeaC,EAAmBC,GAAM,CACpC,GAAI,CAEF,MAAMC,EADOL,IACY,OAAOM,GAAQA,IAASF,CAAE,EACnD,aAAa,QAAQL,EAAa,KAAK,UAAUM,CAAW,CAAC,CAC9D,OAAQH,EAAO,CACd,QAAQ,MAAM,kDAAmDA,CAAK,CACvE,CACH,ECxDMK,EAAU,uCAEVC,EAAO,CACX,UAAW,SAAS,cAAc,gBAAgB,EAClD,YAAa,SAAS,cAAc,kBAAkB,EACtD,cAAe,SAAS,cAAc,oBAAoB,EAC1D,aAAc,SAAS,cAAc,qBAAqB,CAC5D,EAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDC,IACAC,GACF,CAAC,EAED,eAAeD,GAAa,CAC1B,GAAKD,EAAK,UAEV,GAAI,CACF,MAAMG,EAAW,MAAM,MAAM,GAAGJ,CAAO,QAAQ,EAC/C,GAAI,CAACI,EAAS,GAAI,MAAM,IAAI,MAAM,uBAAuB,EAEzD,KAAM,CAAE,OAAAC,EAAQ,MAAAC,CAAK,EAAK,MAAMF,EAAS,KAAI,EAE7CH,EAAK,UAAU,YAAcK,EAC7BL,EAAK,YAAY,YAAcI,CAChC,OAAQV,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CM,EAAK,UAAU,YACb,iFACFA,EAAK,YAAY,YAAc,SAChC,CACH,CAEA,eAAeM,GAA4B,CACzC,MAAMC,EAAMf,IAEZ,GAAIe,EAAI,SAAW,EAAG,MAAO,CAAA,EAE7B,MAAMC,EAAWD,EAAI,IAAIX,GAAMa,EAAS,gBAAgBb,CAAE,CAAC,EAG3D,OAFkB,MAAM,QAAQ,IAAIY,CAAQ,CAG9C,CAEA,eAAeN,GAAkB,CAC/B,GAAI,CAACF,EAAK,cAAe,OAEzB,MAAMU,EAAY,MAAMJ,IAEpBI,EAAU,SAAW,GACvBV,EAAK,cAAc,UAAY,GAC/BA,EAAK,aAAa,UAAU,OAAO,WAAW,IAE9CA,EAAK,aAAa,UAAU,IAAI,WAAW,EAC3CA,EAAK,cAAc,UAAYW,EAAaD,CAAS,EACrDE,IAEJ,CAEA,SAASD,EAAaE,EAAK,CACzB,OAAOA,EAAI,IAAIC,GAAQC,EAAS,aAAaD,CAAI,CAAC,EAAE,KAAK,EAAE,CAC7D,CAEA,SAASF,GAAoB,CAC3B,MAAMI,EAAahB,EAAK,cAAc,iBAAiB,gBAAgB,EACjEiB,EAAYjB,EAAK,cAAc,iBAAiB,eAAe,EAErEgB,EAAW,QAAQE,GAAO,CACxBA,EAAI,iBAAiB,QAASC,CAAY,CAC9C,CAAG,EAEDF,EAAU,QAAQC,GAAO,CACvBA,EAAI,iBAAiB,QAASE,CAAW,CAC7C,CAAG,CACH,CAEA,SAASD,EAAaE,EAAO,CAE3B,MAAMzB,EADMyB,EAAM,cACH,QAAQ,GAEvB1B,EAAiBC,CAAE,EACnBM,GACF,CAEA,SAASkB,EAAYC,EAAO,CAE1B,MAAMzB,EADMyB,EAAM,cACH,QAAQ,GAEvB,QAAQ,IAAI,+BAA+BzB,CAAE,EAAE,CACjD"}